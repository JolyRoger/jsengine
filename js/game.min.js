function Init(){this.name="Init";this.start=function(){console.log("Init started");};this.play=function(){$("#stateInfo").html("Init played");};this.stop=function(){console.log("Init stopped");};}function State1(){this.name="State1";this.start=function(){console.log("State1 started");};this.play=function(){$("#stateInfo").html("State1 played");};this.stop=function(){console.log("State1 stopped");};}function State2(){this.name="State2";this.start=function(){console.log("State2 started");};this.play=function(){$("#stateInfo").html("State2 played");};this.stop=function(){console.log("State2 stopped");};}function State3(){this.name="State3";this.start=function(){console.log("State3 started");};this.play=function(){$("#stateInfo").html("State3 played");};this.stop=function(){console.log("State3 stopped");};}function Finish(){this.name="Finish";this.start=function(){console.log("Finish started");};this.play=function(){$("#stateInfo").html("Finish played");};this.stop=function(){console.log("Finish stopped");};}$(function(){$("#stateInfo").html("Hello engine!");createGameContext();});var index=1;var engineStarted=false;var stateList=[];var currentState={stop:function(){console.info("fake stop");}};var tick=1000;function getInitState(){for(var a=0;a<stateList.length;a++){if(stateList[a].name.toLowerCase()==="init"){return stateList[a];}}return null;}function getStateByName(b){for(var a=0;a<stateList.length;a++){if(stateList[a].name.toLowerCase()===b.toLowerCase()){return stateList[a];}}return null;}function registerState(a){stateList.push(new a);}function go(){gotoNextState("Init");}function nextState(){if(stateList[index]){gotoNextState(stateList[index++].name);}else{index=1;nextState();}}var currentPlay;function gotoNextState(b){clearInterval(currentPlay);currentState.stop();currentState.active=false;var a=getStateByName(b);if(a===null){return;}currentState=a;currentState.active=true;currentState.start();currentPlay=setInterval(currentState.play,tick);}function halt(){clearInterval(currentPlay);currentState.stop();currentState.active=false;}function extend(b,a){var c=function(){};c.prototype=a.prototype;b.prototype=new c();b.prototype.constructor=b;b.superclass=a.prototype;}function print(){}function createGameContext(){registerState(Init);registerState(State1);registerState(State2);registerState(State3);registerState(Finish);}function State(){this.active=false;this.start=function(){console.log("super start");};this.play=function(){console.log("super play");};this.stop=function(){console.log("super stop");};}